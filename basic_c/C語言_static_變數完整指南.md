# C èªè¨€ Static è®Šæ•¸å®Œæ•´æŒ‡å—

## å‰è¨€

æœ¬ç­†è¨˜è©³ç´°èªªæ˜ C èªè¨€ä¸­ static é—œéµå­—çš„æ­£ç¢ºç”¨æ³•ï¼Œç‰¹åˆ¥æ˜¯èˆ‡å…¨åŸŸè®Šæ•¸çš„å·®ç•°ä»¥åŠä½¿ç”¨æ™‚æ©Ÿã€‚

## Static èˆ‡ Global çš„æ ¸å¿ƒå·®ç•°

### ä½œç”¨åŸŸçš„æ ¹æœ¬ä¸åŒ

**Global è®Šæ•¸**ï¼š
- åœ¨æ‰€æœ‰å‡½æ•¸ä¹‹å¤–å®šç¾©
- å°**æ•´å€‹ç¨‹å¼**çš„æ‰€æœ‰å‡½æ•¸éƒ½å¯è¦‹
- å¯ä»¥è·¨æª”æ¡ˆå­˜å–ï¼ˆé…åˆ `extern`ï¼‰

**Static è®Šæ•¸**ï¼š
æ ¹æ“šå®šç¾©ä½ç½®åˆ†ç‚ºå…©ç¨®æƒ…å¢ƒï¼š

### 1. Static å€åŸŸè®Šæ•¸ï¼ˆå‡½æ•¸å…§å®šç¾©ï¼‰

```c
void counter_function() {
    static int count = 0;  // åªåœ¨æ­¤å‡½æ•¸å…§å¯è¦‹
    count++;
    printf("å‘¼å«æ¬¡æ•¸ï¼š%d\n", count);
}
```

**ç‰¹æ€§**ï¼š
- **ä½œç”¨åŸŸ**ï¼šåƒ…é™æ–¼å®šç¾©å®ƒçš„å‡½æ•¸å…§
- **ç”Ÿå‘½é€±æœŸ**ï¼šæ•´å€‹ç¨‹å¼åŸ·è¡ŒæœŸé–“
- **è¨˜æ†¶é«”ä½ç½®**ï¼šData/BSS å€æ®µï¼ˆä¸æ˜¯ Stackï¼‰

### 2. Static å…¨åŸŸè®Šæ•¸ï¼ˆå‡½æ•¸å¤–å®šç¾©ï¼‰

```c
static int file_counter = 0;  // æª”æ¡ˆä½œç”¨åŸŸ

void increment_counter() {
    file_counter++;  // å¯ä»¥å­˜å–
}

void display_counter() {
    printf("è¨ˆæ•¸å™¨å€¼ï¼š%d\n", file_counter);
}
```

**ç‰¹æ€§**ï¼š
- **ä½œç”¨åŸŸ**ï¼šåƒ…é™æ–¼**åŒä¸€æª”æ¡ˆ**å…§çš„æ‰€æœ‰å‡½æ•¸
- **ç„¡æ³•**è·¨æª”æ¡ˆå­˜å–ï¼ˆå³ä½¿ä½¿ç”¨ `extern` ä¹Ÿä¸è¡Œï¼‰

## è¨˜æ†¶é«”é…ç½®è©³ç´°å°æ¯”

| è®Šæ•¸é¡å‹ | è¨˜æ†¶é«”å€æ®µ | ç”Ÿå‘½é€±æœŸ | ä½œç”¨åŸŸ |
|---------|-----------|----------|--------|
| Local è®Šæ•¸ | Stack | å‡½æ•¸åŸ·è¡ŒæœŸé–“ | å‡½æ•¸å…§ |
| Global è®Šæ•¸ | Data/BSS | æ•´å€‹ç¨‹å¼ | æ•´å€‹ç¨‹å¼ |
| Static å€åŸŸè®Šæ•¸ | Data/BSS | æ•´å€‹ç¨‹å¼ | å‡½æ•¸å…§ |
| Static å…¨åŸŸè®Šæ•¸ | Data/BSS | æ•´å€‹ç¨‹å¼ | åŒä¸€æª”æ¡ˆ |

## ç‚ºä»€éº¼ Static æ¯” Global æ›´å¥½ï¼Ÿ

### è§£æ±º Global è®Šæ•¸çš„ä¸»è¦å•é¡Œï¼š

1. **âœ… ä½œç”¨åŸŸé™åˆ¶**ï¼š
   - Static è®Šæ•¸ä½œç”¨åŸŸå—é™ï¼Œä¸æœƒæ±¡æŸ“å…¨åŸŸå‘½åç©ºé–“
   - é¿å…ä¸åŒæ¨¡çµ„é–“çš„æ„å¤–è¡çª

2. **âœ… å°è£æ€§**ï¼š
   - Static å…¨åŸŸè®Šæ•¸åªèƒ½åœ¨åŒä¸€æª”æ¡ˆå…§å­˜å–
   - æä¾›äº†åŸºæœ¬çš„è³‡è¨Šéš±è—

3. **âœ… å¯ç¶­è­·æ€§**ï¼š
   - ä¿®æ”¹å½±éŸ¿ç¯„åœæœ‰é™
   - å®¹æ˜“è¿½è¹¤è®Šæ•¸çš„ä½¿ç”¨ä½ç½®

## ğŸ¯ Static è®Šæ•¸ä½¿ç”¨æ™‚æ©Ÿ

### âœ… æ‡‰è©²ä½¿ç”¨ Static çš„æƒ…å¢ƒï¼š

1. **å›å‚³é™£åˆ—/æŒ‡æ¨™æ™‚**ï¼š
```c
int* get_primes() {
    static int primes[5] = {2, 3, 5, 7, 11};  // ç¢ºä¿è¨˜æ†¶é«”æœ‰æ•ˆ
    return primes;
}
```

2. **ä¿æŒå‡½æ•¸ç‹€æ…‹**ï¼š
```c
int get_next_id() {
    static int current_id = 1000;  // è·¨å‘¼å«ä¿æŒç‹€æ…‹
    return current_id++;
}
```

3. **å–®ä¾‹æ¨¡å¼å¯¦ç¾**ï¼š
```c
struct Config* get_config() {
    static struct Config instance = {0};  // å”¯ä¸€å¯¦ä¾‹
    return &instance;
}
```

4. **æŸ¥è©¢è¡¨æ ¼**ï¼š
```c
const char* get_month_name(int month) {
    static const char* months[] = {"Jan", "Feb", "Mar"};  // å›ºå®šè³‡æ–™
    return months[month-1];
}
```

### âŒ ä¸éœ€è¦ Static çš„æƒ…å¢ƒï¼š

1. **åŸºæœ¬å‹åˆ¥å›å‚³**ï¼š
```c
int get_number() {
    int x = 42;
    return x;  // ç›´æ¥å›å‚³å€¼çš„å‰¯æœ¬
}
```

2. **è‡¨æ™‚è¨ˆç®—çµæœ**ï¼š
```c
bool is_even(int n) {
    return (n % 2 == 0);  // ä¸éœ€è¦ä¿æŒç‹€æ…‹
}
```

## å‡½æ•¸åƒæ•¸å‚³éè©³è§£ â­

### ä»€éº¼æ˜¯å‡½æ•¸åƒæ•¸å‚³éï¼Ÿ

å‡½æ•¸åƒæ•¸å‚³éæ˜¯æŒ‡**é€éå‡½æ•¸çš„åƒæ•¸åˆ—è¡¨ä¾†å‚³éè³‡æ–™**ï¼Œè€Œä¸æ˜¯ä¾è³´å…¨åŸŸè®Šæ•¸æˆ– static è®Šæ•¸ã€‚

### åŸºæœ¬èªæ³•ï¼š
```c
return_type function_name(parameter_type parameter_name) {
    // å‡½æ•¸å…§å®¹
    return value;
}
```

### å¯¦éš›ç¯„ä¾‹å°æ¯”ï¼š

#### âŒ ä½¿ç”¨ Global è®Šæ•¸çš„æ–¹å¼ï¼š
```c
#include <stdio.h>

int global_result;  // å…¨åŸŸè®Šæ•¸

void calculate_square(int number) {
    global_result = number * number;  // ä¿®æ”¹å…¨åŸŸè®Šæ•¸
}

int main() {
    calculate_square(5);
    printf("çµæœï¼š%d\n", global_result);  // é€éå…¨åŸŸè®Šæ•¸å–å¾—çµæœ
    return 0;
}
```

#### âœ… ä½¿ç”¨å‡½æ•¸åƒæ•¸å‚³éçš„æ–¹å¼ï¼š
```c
#include <stdio.h>

int calculate_square(int number) {
    return number * number;  // ç›´æ¥å›å‚³çµæœ
}

int main() {
    int result = calculate_square(5);  // é€éå›å‚³å€¼å–å¾—çµæœ
    printf("çµæœï¼š%d\n", result);
    return 0;
}
```

## ğŸ”„ C èˆ‡ C++ åƒæ•¸å‚³éå®Œæ•´è§£æ

### C èªè¨€çš„åƒæ•¸å‚³éæ©Ÿåˆ¶

#### é‡è¦è§€å¿µï¼šC èªè¨€åªæœ‰ Call by Valueï¼

å¾ˆå¤šäººæœƒæ··æ·†è¡“èªï¼Œè®“æˆ‘ç‚ºæ‚¨æ¾„æ¸…ï¼š

#### âŒ å¸¸è¦‹èª¤è§£ï¼š
- "C èªè¨€æœ‰ Call by Reference"
- "æŒ‡æ¨™å‚³éå°±æ˜¯ Call by Reference"

#### âœ… æ­£ç¢ºç†è§£ï¼š
**C èªè¨€æ‰€æœ‰çš„åƒæ•¸å‚³ééƒ½æ˜¯ Call by Valueï¼ˆå‚³å€¼å‘¼å«ï¼‰ï¼**

### è©³ç´°èªªæ˜å„é¡å‹å‚³éï¼š

#### 1. åŸºæœ¬å‹åˆ¥çš„ Call by Value
```c
void modify_int(int x) {
    x = 100;  // x æ˜¯åŸå§‹å€¼çš„å‰¯æœ¬
}

int main() {
    int num = 5;
    modify_int(num);
    printf("%d\n", num);  // è¼¸å‡ºï¼š5ï¼ˆæœªæ”¹è®Šï¼‰
    return 0;
}
```
**æ©Ÿåˆ¶**ï¼šè¤‡è£½ num çš„å€¼ï¼ˆ5ï¼‰çµ¦åƒæ•¸ xï¼Œä¿®æ”¹ x ä¸å½±éŸ¿ num

#### 2. æŒ‡æ¨™çš„ Call by Value
```c
void modify_by_pointer(int *ptr) {
    *ptr = 100;  // ä¿®æ”¹ ptr æŒ‡å‘çš„è¨˜æ†¶é«”ä½ç½®
}

int main() {
    int num = 5;
    modify_by_pointer(&num);
    printf("%d\n", num);  // è¼¸å‡ºï¼š100ï¼ˆå·²æ”¹è®Šï¼‰
    return 0;
}
```
**é—œéµå·®ç•°**ï¼š
- å‚³éçš„æ˜¯ã€ŒæŒ‡æ¨™çš„å€¼ã€ï¼ˆå³è¨˜æ†¶é«”ä½å€çš„å‰¯æœ¬ï¼‰
- ä½†é€™å€‹å‰¯æœ¬ä»ç„¶æŒ‡å‘åŒä¸€å¡Šè¨˜æ†¶é«”
- æ‰€ä»¥å¯ä»¥é€éæŒ‡æ¨™ä¿®æ”¹åŸå§‹è®Šæ•¸

#### 3. é™£åˆ—å‚³éï¼ˆå¯¦éš›ä¸Šæ˜¯æŒ‡æ¨™çš„ Call by Valueï¼‰
```c
void modify_array(int arr[]) {  // å¯¦éš›ä¸Šæ˜¯ int *arr
    arr[0] = 999;  // ä¿®æ”¹ç¬¬ä¸€å€‹å…ƒç´ 
}

int main() {
    int numbers[3] = {1, 2, 3};
    modify_array(numbers);
    printf("%d\n", numbers[0]);  // è¼¸å‡ºï¼š999ï¼ˆå·²æ”¹è®Šï¼‰
    return 0;
}
```

### C++ çš„åƒæ•¸å‚³éæ©Ÿåˆ¶

#### âœ… **C++ ç¢ºå¯¦æœ‰çœŸæ­£çš„ Call by Referenceï¼**

```cpp
// C++ çš„ Call by Reference
void swap(int &a, int &b) {  // æ³¨æ„ & ç¬¦è™Ÿ
    int temp = a;
    a = b;
    b = temp;
}

int main() {
    int x = 5, y = 10;
    swap(x, y);  // ç›´æ¥å‚³éè®Šæ•¸æœ¬èº«ï¼Œä¸æ˜¯å‰¯æœ¬
    cout << x << " " << y << endl;  // è¼¸å‡ºï¼š10 5
    return 0;
}
```

### ğŸ“Š C èˆ‡ C++ åƒæ•¸å‚³éå°æ¯”

| èªè¨€ | Call by Value | Call by Pointer | Call by Reference |
|------|---------------|-----------------|-------------------|
| C    | âœ… æ”¯æ´       | âœ… æ”¯æ´         | âŒ ä¸æ”¯æ´         |
| C++  | âœ… æ”¯æ´       | âœ… æ”¯æ´         | âœ… æ”¯æ´           |

### C++ çš„ä¸‰ç¨®åƒæ•¸å‚³éæ–¹å¼ï¼š

#### 1. Call by Valueï¼ˆå‚³å€¼ï¼‰
```cpp
void func(int x) { x = 100; }  // ä¿®æ”¹å‰¯æœ¬ï¼Œä¸å½±éŸ¿åŸå§‹è®Šæ•¸
```

#### 2. Call by Referenceï¼ˆå‚³å¼•ç”¨ï¼‰â­
```cpp
void func(int &x) { x = 100; }  // ç›´æ¥ä¿®æ”¹åŸå§‹è®Šæ•¸
```

#### 3. Call by Pointerï¼ˆå‚³æŒ‡æ¨™ï¼‰
```cpp
void func(int *x) { *x = 100; }  // é€éæŒ‡æ¨™ä¿®æ”¹
```

## ğŸ” Call by Reference åŸç†è§£æ

### ä»€éº¼æ˜¯ Referenceï¼ˆå¼•ç”¨ï¼‰ï¼Ÿ

**Reference æ˜¯è®Šæ•¸çš„åˆ¥åï¼ˆAliasï¼‰**ï¼Œå®ƒä¸æ˜¯ç¨ç«‹çš„è®Šæ•¸ï¼Œè€Œæ˜¯ç¾æœ‰è®Šæ•¸çš„å¦ä¸€å€‹åå­—ã€‚

### Reference çš„ç‰¹æ€§ï¼š

#### 1. **è¨˜æ†¶é«”å…±äº«**
```cpp
int original = 42;
int &reference = original;  // reference æ˜¯ original çš„åˆ¥å

// reference å’Œ original ä½”ç”¨åŒä¸€å¡Šè¨˜æ†¶é«”
cout << &original << endl;   // 0x7fff5fbff6ac
cout << &reference << endl;  // 0x7fff5fbff6acï¼ˆç›¸åŒä½å€ï¼‰
```

#### 2. **åˆå§‹åŒ–å¿…éœ€**
```cpp
int &ref;        // âŒ éŒ¯èª¤ï¼šå¼•ç”¨å¿…é ˆåˆå§‹åŒ–
int &ref = var;  // âœ… æ­£ç¢ºï¼šå¿…é ˆç¶å®šåˆ°ç¾æœ‰è®Šæ•¸
```

#### 3. **ä¸å¯é‡æ–°ç¶å®š**
```cpp
int a = 1, b = 2;
int &ref = a;    // ref ç¶å®šåˆ° a
ref = b;         // âŒ é€™ä¸æ˜¯é‡æ–°ç¶å®šï¼Œè€Œæ˜¯å°‡ b çš„å€¼è³¦çµ¦ a
                 // ref ä»ç„¶æŒ‡å‘ a
```

### Call by Reference çš„å‚³éæ©Ÿåˆ¶ï¼š

```cpp
void modify_value(int &param) {  // param æ˜¯å‚³å…¥è®Šæ•¸çš„åˆ¥å
    param = 100;  // ç›´æ¥ä¿®æ”¹åŸå§‹è®Šæ•¸
}

int main() {
    int original = 5;
    modify_value(original);  // å‚³é original æœ¬èº«ï¼Œä¸æ˜¯å‰¯æœ¬
    cout << original << endl;  // è¼¸å‡ºï¼š100
    return 0;
}
```

**å‚³éçš„æœ¬è³ª**ï¼š
- ä¸æ˜¯å‚³éè®Šæ•¸çš„å€¼
- ä¸æ˜¯å‚³éè®Šæ•¸çš„ä½å€
- è€Œæ˜¯**å‚³éè®Šæ•¸æœ¬èº«çš„å¦ä¸€å€‹åå­—ï¼ˆåˆ¥åï¼‰**

### èˆ‡ Pointer çš„é—œéµå·®ç•°ï¼š

| ç‰¹æ€§ | Referenceï¼ˆå¼•ç”¨ï¼‰ | Pointerï¼ˆæŒ‡æ¨™ï¼‰ |
|------|------------------|-----------------|
| èªæ³• | `int &ref = var` | `int *ptr = &var` |
| åˆå§‹åŒ– | å¿…é ˆåˆå§‹åŒ– | å¯ä»¥ç‚º nullptr |
| é‡æ–°ç¶å®š | ä¸å¯é‡æ–°ç¶å®š | å¯ä»¥é‡æ–°æŒ‡å‘ |
| è¨˜æ†¶é«” | å…±äº«è¨˜æ†¶é«” | ç¨ç«‹çš„è¨˜æ†¶é«”ä½ç½® |
| ä½¿ç”¨ | `ref = 10` | `*ptr = 10` |

### å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹å°æ¯”ï¼š

```cpp
// âœ… Modern C++ Style - Call by Reference
void modern_swap(int &a, int &b) {
    int temp = a;
    a = b;
    b = temp;
}

// âœ… Legacy C Style - Call by Pointerï¼ˆC++ ä¸­ä¹Ÿå¯ç”¨ï¼‰
void legacy_swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

// âœ… Pure Value Passingï¼ˆä¸ä¿®æ”¹åŸå§‹è®Šæ•¸ï¼‰
void safe_function(int val) {
    val = 100;  // åªä¿®æ”¹å‰¯æœ¬
}
```

## è¡“èªå°ç…§è¡¨

| å¸¸è¦‹èªªæ³• | æ­£ç¢ºèªªæ³• | èªªæ˜ |
|---------|---------|------|
| Pass by Value | Call by Value | å‚³éå€¼çš„å‰¯æœ¬ |
| Pass by Pointer | Call by Valueï¼ˆå‚³éæŒ‡æ¨™å€¼ï¼‰ | å‚³éæŒ‡æ¨™å€¼çš„å‰¯æœ¬ |
| Pass by Reference | Call by Reference | C++ ç‰¹æœ‰ï¼Œå‚³éå¼•ç”¨ |
| C çš„åœ°å€å‚³é | Call by Valueï¼ˆæŒ‡æ¨™å€¼ï¼‰ | å‚³éä½å€çš„å‰¯æœ¬ |

## å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

### ç¯„ä¾‹ 1ï¼šå‡½æ•¸å‘¼å«è¨ˆæ•¸å™¨

```c
#include <stdio.h>

void track_calls() {
    static int call_count = 0;  // åªåˆå§‹åŒ–ä¸€æ¬¡
    call_count++;
    printf("æ­¤å‡½æ•¸å·²è¢«å‘¼å« %d æ¬¡\n", call_count);
}

int main() {
    track_calls();  // è¼¸å‡ºï¼šæ­¤å‡½æ•¸å·²è¢«å‘¼å« 1 æ¬¡
    track_calls();  // è¼¸å‡ºï¼šæ­¤å‡½æ•¸å·²è¢«å‘¼å« 2 æ¬¡
    track_calls();  // è¼¸å‡ºï¼šæ­¤å‡½æ•¸å·²è¢«å‘¼å« 3 æ¬¡
    return 0;
}
```

### ç¯„ä¾‹ 2ï¼šä¿æŒå‡½æ•¸ç‹€æ…‹

```c
#include <stdio.h>

int get_next_id() {
    static int current_id = 1000;  // å¾ 1000 é–‹å§‹
    return current_id++;
}

int main() {
    printf("ID: %d\n", get_next_id());  // è¼¸å‡ºï¼šID: 1000
    printf("ID: %d\n", get_next_id());  // è¼¸å‡ºï¼šID: 1001
    printf("ID: %d\n", get_next_id());  // è¼¸å‡ºï¼šID: 1002
    return 0;
}
```

### ç¯„ä¾‹ 3ï¼šæª”æ¡ˆç´šåˆ¥çš„é…ç½®è®Šæ•¸

```c
// config.c
#include <stdio.h>

static int debug_level = 1;  // åªèƒ½åœ¨é€™å€‹æª”æ¡ˆä¸­ä½¿ç”¨

void set_debug_level(int level) {
    debug_level = level;
}

void log_message(const char* message) {
    if (debug_level > 0) {
        printf("[DEBUG %d] %s\n", debug_level, message);
    }
}

// main.c - ç„¡æ³•ç›´æ¥å­˜å– debug_level
// extern int debug_level;  // é€™æ¨£æœƒç·¨è­¯éŒ¯èª¤ï¼
```

## å¸¸è¦‹èª¤è§£æ¾„æ¸…

### âŒ éŒ¯èª¤ç†è§£ï¼š
```c
// èª¤ä»¥ç‚º static å°±æ˜¯ global
static int shared_data = 0;

void function_a() {
    shared_data = 10;  // å¯ä»¥å­˜å–
}

void function_b() {
    printf("%d\n", shared_data);  // å¯ä»¥å­˜å–
}
```

### âœ… æ­£ç¢ºç†è§£ï¼š
```c
// static é™åˆ¶äº†ä½œç”¨åŸŸ
static int file_data = 0;  // åªèƒ½åœ¨é€™å€‹æª”æ¡ˆä¸­ä½¿ç”¨

// å…¶ä»–æª”æ¡ˆç„¡æ³•å­˜å–æ­¤è®Šæ•¸
// å³ä½¿ä½¿ç”¨ extern ä¹Ÿä¸è¡Œ
```

## æœ€ä½³å¯¦è¸æŒ‡å—

### ä½¿ç”¨å„ªå…ˆé †åºï¼ˆå¾æ¨è–¦åˆ°ä¸æ¨è–¦ï¼‰ï¼š

1. **âœ… å‡½æ•¸åƒæ•¸å‚³é** - æœ€ä½³é¸æ“‡
   - æ˜ç¢ºçš„è³‡æ–™æµ
   - æ˜“æ–¼æ¸¬è©¦å’Œé™¤éŒ¯
   - ç„¡éš±å«çš„ç‹€æ…‹ä¾è³´

2. **âœ… Static å€åŸŸè®Šæ•¸** - é©ç•¶ä½¿ç”¨
   - éœ€è¦ä¿æŒå‡½æ•¸ç‹€æ…‹æ™‚
   - é¿å…å…¨åŸŸå‘½åç©ºé–“æ±¡æŸ“

3. **âœ… Static å…¨åŸŸè®Šæ•¸** - æœ‰é™åº¦ä½¿ç”¨
   - æª”æ¡ˆå…§éƒ¨é…ç½®è®Šæ•¸
   - æ¨¡çµ„ç´šåˆ¥çš„ç‹€æ…‹ç®¡ç†

4. **âŒ Global è®Šæ•¸** - æ‡‰è©²é¿å…
   - ç ´å£å°è£æ€§
   - é›£ä»¥ç¶­è­·å’Œé™¤éŒ¯

### ä»€éº¼æ™‚å€™ä½¿ç”¨ Staticï¼š

**é©åˆä½¿ç”¨ Static çš„æƒ…å¢ƒ**ï¼š
- éœ€è¦åœ¨å‡½æ•¸å‘¼å«é–“ä¿æŒç‹€æ…‹
- æª”æ¡ˆå…§éƒ¨çš„é…ç½®è®Šæ•¸
- é¿å…å‘½åç©ºé–“è¡çª
- å¯¦ç¾ç°¡å–®çš„å–®ä¾‹æ¨¡å¼

**ä¸é©åˆä½¿ç”¨ Static çš„æƒ…å¢ƒ**ï¼š
- éœ€è¦è·¨æª”æ¡ˆå…±äº«è³‡æ–™
- å¤šåŸ·è¡Œç·’ç’°å¢ƒä¸‹çš„å…±äº«ç‹€æ…‹
- éœ€è¦å‹•æ…‹é…ç½®çš„è³‡æ–™

## æ³¨æ„äº‹é …èˆ‡é™·é˜±

### åŸ·è¡Œç·’å®‰å…¨å•é¡Œï¼š
```c
// âŒ éåŸ·è¡Œç·’å®‰å…¨
void unsafe_counter() {
    static int count = 0;
    count++;  // å¤šåŸ·è¡Œç·’åŒæ™‚åŸ·è¡Œæœƒæœ‰ç«¶çˆ­æ¢ä»¶
}

// âœ… æ”¹é€²ç‰ˆæœ¬éœ€è¦åŠ å…¥åŒæ­¥æ©Ÿåˆ¶
```

### åˆå§‹åŒ–æ™‚æ©Ÿï¼š
```c
void demonstrate_initialization() {
    static int properly_initialized = 42;  // âœ… æ­£ç¢ºï¼šå®£å‘Šæ™‚åˆå§‹åŒ–
    
    static int wrong_way;
    wrong_way = 42;  // âŒ éŒ¯èª¤ï¼šæ¯æ¬¡å‡½æ•¸å‘¼å«éƒ½æœƒåŸ·è¡Œé€™è¡Œ
}
```

## ç¸½çµ

Static è®Šæ•¸çš„æ ¸å¿ƒåƒ¹å€¼åœ¨æ–¼**ä½œç”¨åŸŸé™åˆ¶**è€Œéè¨˜æ†¶é«”é…ç½®ï¼š
- æä¾›æ¯” Global è®Šæ•¸æ›´å¥½çš„å°è£æ€§
- ä¿æŒæ¯” Local è®Šæ•¸æ›´é•·çš„ç”Ÿå‘½é€±æœŸ
- é¿å…å‘½åç©ºé–“æ±¡æŸ“
- å¯¦ç¾æ¨¡çµ„å…§çš„è³‡è¨Šéš±è—

**é—œéµè§€å¿µç¸½çµ**ï¼š
1. **C èªè¨€åªæœ‰ Call by Value**ï¼Œå³ä½¿æ˜¯å‚³éæŒ‡æ¨™ä¹Ÿæ˜¯å¦‚æ­¤
2. **C++ æœ‰çœŸæ­£çš„ Call by Reference**ï¼Œé€™æ˜¯èˆ‡ C çš„é‡è¦å·®ç•°
3. **æŒ‡æ¨™å‚³é**è®“æˆ‘å€‘å¯ä»¥é–“æ¥ä¿®æ”¹åŸå§‹è®Šæ•¸ï¼Œä½†æœ¬è³ªä»æ˜¯å‚³å€¼
4. **Reference æ˜¯è®Šæ•¸çš„åˆ¥å**ï¼Œèˆ‡åŸå§‹è®Šæ•¸å…±äº«è¨˜æ†¶é«”
5. **Static ä½¿ç”¨æ™‚æ©Ÿ**ï¼šé™£åˆ—å›å‚³ã€ç‹€æ…‹ä¿æŒã€å–®ä¾‹æ¨¡å¼

è¨˜ä½ï¼š**Static â‰  Global**ï¼Œå®ƒæ˜¯ä¸€å€‹æ›´å®‰å…¨ã€æ›´æœ‰æ§åˆ¶æ€§çš„é¸æ“‡ã€‚

**æœ€é‡è¦çš„æ˜¯**ï¼šå„ªå…ˆè€ƒæ…®ä½¿ç”¨**å‡½æ•¸åƒæ•¸å‚³é**ï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦ä¿æŒç‹€æ…‹æ™‚æ‰ä½¿ç”¨ static è®Šæ•¸ã€‚